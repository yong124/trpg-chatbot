<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI TRPG</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="character-creation-screen" class="screen">
        <h2>새로운 캐릭터 생성</h2>
        <div class="char-input-group">
            <label for="char-name">이름:</label>
            <input type="text" id="char-name" value="탐험가">
        </div>

        <div class="char-input-group">
            <label>능력치 분배 (총 <span id="total-points">8</span>점, 각 능력치 1~3점):</label>
            <div id="stat-allocation">
                <div class="stat-item">
                    <span>근력:</span>
                    <button class="stat-btn minus" data-stat="strength">-</button>
                    <span id="alloc-strength" data-value="1">1</span>
                    <button class="stat-btn plus" data-stat="strength">+</button>
                </div>
                <div class="stat-item">
                    <span>민첩:</span>
                    <button class="stat-btn minus" data-stat="agility">-</button>
                    <span id="alloc-agility" data-value="1">1</span>
                    <button class="stat-btn plus" data-stat="agility">+</button>
                </div>
                <div class="stat-item">
                    <span>지능:</span>
                    <button class="stat-btn minus" data-stat="intelligence">-</button>
                    <span id="alloc-intelligence" data-value="1">1</span>
                    <button class="stat-btn plus" data-stat="intelligence">+</button>
                </div>
                <div class="stat-item">
                    <span>감각:</span>
                    <button class="stat-btn minus" data-stat="senses">-</button>
                    <span id="alloc-senses" data-value="1">1</span>
                    <button class="stat-btn plus" data-stat="senses">+</button>
                </div>
                <div class="stat-item">
                    <span>정신력:</span>
                    <button class="stat-btn minus" data-stat="willpower">-</button>
                    <span id="alloc-willpower" data-value="1">1</span>
                    <button class="stat-btn plus" data-stat="willpower">+</button>
                </div>
                <p class="remaining-text">남은 점수: <span id="remaining-points">3</span></p>
            </div>
        </div>

        <div class="char-input-group">
            <label for="initial-inventory">초기 인벤토리 (쉼표로 구분):</label>
            <textarea id="initial-inventory">낡은 단검, 생수 한 병, 정체불명의 열쇠</textarea>
        </div>

        <button id="create-character-btn">캐릭터 생성</button>
    </div>

    <div id="game-container" class="screen hidden">
        <header>
            <h1>AI TRPG</h1>
        </header>

        <main id="main-content">
            <section id="sidebar">
                <div class="tabs">
                    <button class="tab-button active" onclick="openTab(event, 'character-status')">캐릭터</button>
                    <button class="tab-button" onclick="openTab(event, 'inventory')">인벤토리</button>
                </div>

                <div id="character-status" class="tab-content active">
                    <h2>캐릭터 정보</h2>
                    <div id="character-info-display">
                        <p><strong>이름:</strong> <span id="display-char-name">탐험가</span></p>
                        <p><strong>HP:</strong> <span id="player-hp">10</span>/<span id="player-max-hp">10</span></p>
                        <p><strong>SP:</strong> <span id="player-sp">5</span>/<span id="player-max-sp">5</span></p>
                        <h3>능력치</h3>
                        <ul>
                            <li><strong>근력:</strong> <span id="display-strength">1</span></li>
                            <li><strong>민첩:</strong> <span id="display-agility">1</span></li>
                            <li><strong>지능:</strong> <span id="display-intelligence">1</span></li>
                            <li><strong>감각:</strong> <span id="display-senses">1</span></li>
                            <li><strong>정신력:</strong> <span id="display-willpower">1</span></li>
                        </ul>
                    </div>
                </div>

                <div id="inventory" class="tab-content">
                    <h2>인벤토리</h2>
                    <ul id="inventory-list">
                        <li>낡은 단검</li>
                        <li>생수 한 병</li>
                        <li>정체불명의 열쇠</li>
                    </ul>
                </div>
            </section>

            <section id="chat-area">
                <div id="log">
                    
                </div>
                <div id="input-area">
                    <input type="text" id="player-action-input" placeholder="여기에 행동을 입력하세요 (예: 동굴 안으로 들어간다)...">
                    <button id="send-action-btn">액션 전송</button>
                    <div id="dice-roll-area" class="disabled">
                        <div id="dice-display">? + ?</div>
                        <button id="roll-dice-btn">주사위 굴리기 (2d6)</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
      window.BACKEND_API_BASE_URL = "https://trpg-chatbot.onrender.com";
    </script>
    <script src="script.js"></script>
    <script>
        // 탭 전환 기능을 위한 JavaScript
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // 초기 로드 시 '캐릭터' 탭 활성화 (script.js에서 처리)
        // document.addEventListener('DOMContentLoaded', () => {
        //     document.querySelector('.tab-button.active').click();
        // });
    </script>
</body>
</html>